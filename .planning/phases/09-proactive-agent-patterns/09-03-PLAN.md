---
phase: 09-proactive-agent-patterns
plan: 03
type: execute
wave: 2
depends_on: ["09-01", "09-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "meeting-prep-scan cron has fired at least once and produced correct behavior (context sent or 'no meetings' logged)"
    - "anomaly-check cron has fired at least once and produced correct behavior (alert sent or 'no anomalies' logged)"
    - "Pre-meeting context arrives in Slack DM before the meeting starts"
  artifacts: []
  key_links:
    - from: "cron/jobs.json (meeting-prep-scan)"
      to: "cron/runs/*.jsonl"
      via: "Cron execution log shows status ok"
    - from: "cron/jobs.json (anomaly-check)"
      to: "cron/runs/*.jsonl"
      via: "Cron execution log shows status ok"
---

<objective>
Verify all 3 proactive patterns (PP-01, PP-02, PP-03) are operational by triggering cron jobs and confirming correct behavior.

Purpose: Confirm the proactive agent patterns actually fire and produce the expected Slack output (or correctly skip when no action is needed).
Output: Verified PP-01/02/03 requirements with evidence
</objective>

<execution_context>
@/Users/andykaufman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/andykaufman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-proactive-agent-patterns/09-01-SUMMARY.md
@.planning/phases/09-proactive-agent-patterns/09-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Trigger and verify both proactive cron jobs</name>
  <files></files>
  <action>
SSH to EC2 (100.72.143.9) and manually trigger both cron jobs to verify they execute correctly.

**1. Trigger meeting-prep-scan:**
```bash
# Find the job UUID
JOB_ID=$(/home/ubuntu/.npm-global/bin/openclaw cron list --json | python3 -c "import sys,json; jobs=json.load(sys.stdin); [print(j['id']) for j in jobs if j['name']=='meeting-prep-scan']")
/home/ubuntu/.npm-global/bin/openclaw cron trigger "$JOB_ID"
```

Wait 30 seconds, then check:
```bash
# Check run status
ls -la ~/.openclaw/cron/runs/
# Check the most recent run log for this job
cat ~/.openclaw/cron/runs/$JOB_ID.jsonl | tail -1
```

Expected outcome: Either sends pre-meeting context (if calendar has events soon) OR silently completes (if no events). Both are valid -- the key is status=ok.

**2. Trigger anomaly-check:**
```bash
JOB_ID=$(/home/ubuntu/.npm-global/bin/openclaw cron list --json | python3 -c "import sys,json; jobs=json.load(sys.stdin); [print(j['id']) for j in jobs if j['name']=='anomaly-check']")
/home/ubuntu/.npm-global/bin/openclaw cron trigger "$JOB_ID"
```

Wait 30 seconds, then check run status same way.

Expected outcome: Queries health.db, either sends alert (if anomalies found) or silently completes. Status=ok is success.

**3. Verify cron schedules are active:**
```bash
/home/ubuntu/.npm-global/bin/openclaw cron list
```

Confirm both jobs show:
- meeting-prep-scan: `*/15 * * * *`, enabled
- anomaly-check: `0 14,22 * * *`, enabled

**4. Record evidence:**
Capture the cron list output, run logs, and any Slack messages as evidence.
  </action>
  <verify>Both cron jobs show lastStatus=ok in cron list output. Run logs exist in ~/.openclaw/cron/runs/ for both job IDs.</verify>
  <done>Both meeting-prep-scan and anomaly-check crons triggered successfully with status=ok, confirming PP-01/02/03 infrastructure works</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Confirm proactive patterns deliver to Slack correctly</name>
  <files></files>
  <action>
Present verification results from Task 1 to user. Two proactive agent patterns were built and triggered:
1. **meeting-prep-scan** (PP-01 + PP-03): Scans calendar every 15min, sends pre-meeting context and prep reminders to Slack DM
2. **anomaly-check** (PP-02): Checks health metrics twice daily (6 AM / 2 PM PT), alerts on deviations

Ask user to verify Slack DM delivery:
1. Open Slack DM with Bob
2. If a meeting is within 15-45 minutes: look for pre-meeting context message with event title, attendees, prior context
3. If health anomalies were detected: look for health alert message with metric values and recommendations
4. If no meetings and no anomalies: confirm Task 1 shows both jobs ran with status=ok (silent success is correct behavior)
5. Check that cron schedules are reasonable: meeting-prep at */15, anomaly-check at 6 AM + 2 PM PT
  </action>
  <verify>User confirms proactive patterns are working correctly by typing "approved"</verify>
  <done>All 3 PP requirements human-verified: PP-01 (pre-meeting prep), PP-02 (anomaly alerts), PP-03 (context-aware reminders)</done>
</task>

</tasks>

<verification>
1. meeting-prep-scan cron triggered and completed (status=ok)
2. anomaly-check cron triggered and completed (status=ok)
3. Slack delivery confirmed (or silent completion verified if no events/anomalies)
4. Both cron schedules active and enabled
5. PP-01, PP-02, PP-03 requirements satisfied
</verification>

<success_criteria>
- All 3 PP requirements verified:
  - PP-01: Pre-meeting prep fires before events (or correctly skips when none)
  - PP-02: Anomaly alerts check health/Govee data (or correctly skips when normal)
  - PP-03: Context-aware reminders embedded in meeting-prep scan
- Both cron jobs show status=ok after manual trigger
- Human confirms Slack delivery is correct
</success_criteria>

<output>
After completion, create `.planning/phases/09-proactive-agent-patterns/09-03-SUMMARY.md`
</output>
