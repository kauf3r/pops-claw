---
phase: 13-topic-research
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - "~/.openclaw/skills/content-strategy/SKILL.md (EC2)"
  - "~/clawd/agents/rangeos/PRODUCT_CONTEXT.md (EC2)"
autonomous: true

must_haves:
  truths:
    - "Vector (rangeos) has domain guardrails matching other content agents"
    - "content-strategy skill is discoverable by all agents via OpenClaw skill loader"
    - "Skill describes complete topic research workflow with web search, content.db writes, and claim locking"
  artifacts:
    - path: "~/.openclaw/skills/content-strategy/SKILL.md"
      provides: "Topic research skill with web research workflow, content.db INSERT, brief generation"
      contains: "content-strategy"
    - path: "~/clawd/agents/rangeos/PRODUCT_CONTEXT.md"
      provides: "UAS domain guardrails and pipeline protocols for Vector"
      contains: "Claim Locking Protocol"
  key_links:
    - from: "content-strategy SKILL.md"
      to: "/workspace/content.db"
      via: "SQLite INSERT into topics table"
      pattern: "INSERT INTO topics"
    - from: "content-strategy SKILL.md"
      to: "/workspace/content.db"
      via: "pipeline_activity logging"
      pattern: "INSERT INTO pipeline_activity"
---

<objective>
Deploy PRODUCT_CONTEXT.md to Vector (rangeos) and create the content-strategy skill.

Purpose: Vector needs domain guardrails (same as quill/sage/ezra) and a skill that teaches it how to research UAS topics, generate briefs, and insert them into content.db.
Output: PRODUCT_CONTEXT.md in rangeos workspace + content-strategy SKILL.md in skills directory.
</objective>

<execution_context>
@/Users/andykaufman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/andykaufman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-content-db-agent-setup/12-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Deploy PRODUCT_CONTEXT.md to Vector (rangeos) workspace</name>
  <files>~/clawd/agents/rangeos/PRODUCT_CONTEXT.md (EC2)</files>
  <action>
Copy the identical PRODUCT_CONTEXT.md from quill's workspace to rangeos workspace on EC2:

```bash
ssh -i ~/.ssh/clawdbot-key.pem ubuntu@100.72.143.9 "cp ~/clawd/agents/quill/PRODUCT_CONTEXT.md ~/clawd/agents/rangeos/PRODUCT_CONTEXT.md"
```

This is the same file deployed to quill/sage/ezra in Phase 12 Plan 02. Vector needs it for UAS domain DO/DON'T rules, claim locking protocol (CP-05), and activity logging protocol (CP-06).

Verify the file exists and has the expected content (UAS domain rules, claim locking, activity logging).
  </action>
  <verify>
SSH to EC2 and confirm:
1. `ls -la ~/clawd/agents/rangeos/PRODUCT_CONTEXT.md` — file exists
2. `head -5 ~/clawd/agents/rangeos/PRODUCT_CONTEXT.md` — starts with "# UAS Product Context"
3. `grep -c "Claim Locking Protocol" ~/clawd/agents/rangeos/PRODUCT_CONTEXT.md` — returns 1
  </verify>
  <done>PRODUCT_CONTEXT.md deployed to rangeos workspace with identical content to quill/sage/ezra</done>
</task>

<task type="auto">
  <name>Task 2: Create content-strategy skill</name>
  <files>~/.openclaw/skills/content-strategy/SKILL.md (EC2)</files>
  <action>
Create `~/.openclaw/skills/content-strategy/` directory and write SKILL.md on EC2.

The skill must follow the established SKILL.md pattern (YAML frontmatter with name + description, then structured body).

**Frontmatter:**
```yaml
---
name: Content Strategy Research
description: "Research UAS industry topics, generate content briefs with keywords, and insert into content.db topics table for the content marketing pipeline."
---
```

**Skill body sections:**

**1. Overview**
This skill enables topic research for the AirSpace Integration content marketing pipeline. The researcher identifies trending topics, industry developments, and content opportunities in the commercial UAS/drone space, then creates structured topic briefs in content.db.

**2. Prerequisites**
- `/workspace/content.db` must be accessible (bind-mounted from host)
- `sqlite3` CLI available in sandbox
- `curl` available for web research
- Browser available for deeper research (Chromium in Docker)
- Read PRODUCT_CONTEXT.md in your workspace for domain rules before researching

**3. Topic Research Workflow**

Step 1 - Identify Research Areas:
Focus on these UAS verticals (from PRODUCT_CONTEXT.md DO list):
- Agriculture (crop monitoring, precision agriculture, spray drones)
- Construction (site surveys, progress tracking, BIM integration)
- Energy/Utilities (power line inspection, solar farm analysis, wind turbine inspection)
- Infrastructure (bridge inspection, road surveying, cellular tower inspection)
- Mining (volumetric surveys, stockpile measurement, site planning)
- Real Estate (aerial photography, virtual tours, property surveys)
- Technology trends (LiDAR, photogrammetry, thermal imaging, RTK GPS, AI/ML in drone data)
- Regulatory (FAA Part 107, waivers, remote ID, BVLOS updates)

Step 2 - Web Research:
Use browser or curl to search for:
- Recent industry news (last 30-60 days)
- Google Trends for UAS-related keywords
- Competitor blog topics (identify gaps, don't copy)
- Industry publications: DroneLife, Commercial UAV News, sUAS News, Inside Unmanned Systems
- FAA regulatory updates
- Conference/event themes

Search patterns:
```bash
curl -s "https://news.google.com/rss/search?q=commercial+drone+services+2026&hl=en-US&gl=US&ceid=US:en" | head -100
```

Step 3 - Evaluate Topic Viability:
Score each potential topic on:
- Relevance to AirSpace Integration services (must be commercial UAS)
- Search demand (is anyone looking for this?)
- Competition level (can we rank?)
- Freshness (is this timely?)
- Content potential (enough for 1500+ word article?)

Step 4 - Check for Duplicates:
Before creating a topic, check content.db for existing similar topics:
```sql
SELECT id, title, slug, status FROM topics WHERE title LIKE '%keyword%' OR keywords LIKE '%keyword%';
```

**4. Creating Topic Briefs**

For each viable topic, INSERT into content.db:

```sql
BEGIN IMMEDIATE;

INSERT INTO topics (title, slug, brief, keywords, content_type, status, priority, source_url)
VALUES (
  '<descriptive title>',
  '<url-friendly-slug>',
  '<2-3 sentence brief describing the article angle, target audience, and key points to cover>',
  '<comma-separated keywords for SEO>',
  'article',
  'backlog',
  <1-3 priority: 1=high, 2=medium, 3=low>,
  '<URL of primary research source or NULL>'
);

-- Log activity (CP-06)
INSERT INTO pipeline_activity (entity_type, entity_id, agent_id, action, old_status, new_status, details)
VALUES ('topics', last_insert_rowid(), 'rangeos', 'created', NULL, 'backlog', '<brief reason for topic selection>');

COMMIT;
```

**Title guidelines:**
- Clear, specific, not clickbait
- Include primary keyword naturally
- 50-70 characters ideal
- Example: "How LiDAR-Equipped Drones Are Transforming Construction Site Surveys"

**Slug guidelines:**
- Lowercase, hyphen-separated
- Derived from title
- Example: "lidar-drones-construction-site-surveys"

**Brief guidelines:**
- 2-3 sentences: angle + audience + key points
- Example: "Explores how construction firms are using LiDAR-equipped drones for site surveys, replacing traditional ground-based methods. Targets construction project managers evaluating drone adoption. Covers accuracy comparisons, cost analysis, and workflow integration."

**Keywords guidelines:**
- 5-8 comma-separated keywords
- Mix of head terms and long-tail
- Example: "construction drone survey, LiDAR drone mapping, drone site inspection, construction technology, aerial surveying, BIM drone integration"

**Priority guidelines:**
- 1 (High): Timely/trending, high search demand, strong UAS service relevance
- 2 (Medium): Evergreen content, moderate demand, good relevance
- 3 (Low): Niche topics, lower demand, still worth covering

**5. Research Session Output**

Each research session should produce 3-5 topics. After inserting all topics, run a summary:

```sql
SELECT id, title, priority, status, created_at FROM topics WHERE created_at > datetime('now', '-1 hour') ORDER BY priority;
```

Report the topics created in #content-pipeline Slack channel so the team knows what's in the backlog.

**6. Backlog Management**

When the backlog is getting large (10+ topics), focus on quality over quantity. Check current backlog health:

```sql
SELECT status, COUNT(*) as cnt FROM topics GROUP BY status;
SELECT priority, COUNT(*) as cnt FROM topics WHERE status = 'backlog' GROUP BY priority;
```

If more than 10 topics are in backlog status, skip research and report "Backlog healthy - no new topics needed."

**7. Error Handling**
- If content.db is locked (SQLITE_BUSY), retry after 2 seconds, max 3 retries
- If web research fails (no internet), create topics from existing domain knowledge
- If duplicate topic found, skip it and log: "Skipped: similar topic exists (id: X)"
- Always validate PRODUCT_CONTEXT.md rules before inserting (no military, no hobby, no pricing claims)

**8. Tips**
- Check what's already in the pipeline: `SELECT title, status FROM topics ORDER BY created_at DESC LIMIT 20;`
- Prioritize topics that complement existing content (build topic clusters)
- Seasonal awareness: construction peaks spring/summer, agriculture varies by crop
- Regulatory changes are always high-priority (Part 107 updates, remote ID enforcement)
- Think about what questions a commercial drone operator would Google

Verify skill is detected by restarting gateway and checking skills output.
  </action>
  <verify>
SSH to EC2 and confirm:
1. `ls ~/.openclaw/skills/content-strategy/SKILL.md` — file exists
2. `head -5 ~/.openclaw/skills/content-strategy/SKILL.md` — has correct frontmatter
3. `grep -c "INSERT INTO topics" ~/.openclaw/skills/content-strategy/SKILL.md` — returns at least 1
4. Restart gateway: `systemctl --user restart openclaw-gateway`
5. Check gateway loaded skill: `journalctl --user -u openclaw-gateway -n 50 --no-pager | grep -i "content-strategy"` or check skill count in startup logs
  </verify>
  <done>content-strategy SKILL.md deployed at ~/.openclaw/skills/content-strategy/SKILL.md with complete topic research workflow, content.db writes, claim locking, and activity logging</done>
</task>

</tasks>

<verification>
After both tasks:
1. `ls ~/clawd/agents/rangeos/PRODUCT_CONTEXT.md` — exists
2. `ls ~/.openclaw/skills/content-strategy/SKILL.md` — exists
3. Gateway service is active after restart
4. All 7 agents still loading (check gateway startup logs for agent count)
</verification>

<success_criteria>
- PRODUCT_CONTEXT.md deployed to rangeos workspace (identical to quill/sage/ezra copies)
- content-strategy SKILL.md created with YAML frontmatter, research workflow, content.db INSERT patterns, claim locking, and activity logging
- Gateway restarts cleanly with new skill detected
- All 7 agents (main, landos, rangeos, ops, quill, sage, ezra) remain operational
</success_criteria>

<output>
After completion, create `.planning/phases/13-topic-research/13-01-SUMMARY.md`
</output>
