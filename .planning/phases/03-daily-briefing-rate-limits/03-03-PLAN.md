---
phase: 03-daily-briefing-rate-limits
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - /home/ubuntu/.openclaw/cron/jobs.json
autonomous: true

must_haves:
  truths:
    - "Evening recap fires at 7 PM PT (03:00 UTC) daily"
    - "Weekly review fires Sunday 8 AM PT (16:00 UTC)"
    - "Both crons deliver to Andy's Slack DM (D0AARQR0Y4V)"
  artifacts:
    - path: "/home/ubuntu/.openclaw/cron/jobs.json"
      provides: "evening-recap and weekly-review cron jobs"
  key_links:
    - from: "evening-recap cron"
      to: "Slack DM D0AARQR0Y4V"
      via: "announce delivery"
      pattern: "D0AARQR0Y4V"
    - from: "weekly-review cron"
      to: "health.db"
      via: "7-day health trend query"
      pattern: "health_snapshots"
---

<objective>
Create evening recap (7 PM PT daily) and weekly review (Sunday 8 AM PT) cron jobs.

Purpose: Evening recap closes the day with accomplishment summary and tomorrow preview. Weekly review provides 7-day health trends, week summary, and upcoming week outlook.
Output: Two new cron jobs in jobs.json.
</objective>

<execution_context>
@/Users/andykaufman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/andykaufman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create evening recap cron job</name>
  <files>/home/ubuntu/.openclaw/cron/jobs.json</files>
  <action>
SSH to 100.72.143.9 and create the evening recap cron (BR-07):

```
/home/ubuntu/.npm-global/bin/openclaw cron add \
  --name "evening-recap" \
  --description "Daily evening recap at 7 PM PT" \
  --cron "0 19 * * *" \
  --tz "America/Los_Angeles" \
  --model sonnet \
  --session main \
  --wake now \
  --timeout-seconds 90 \
  --system-event "Evening Recap — compile and send to Andy's DM D0AARQR0Y4V.

## Today's Summary
Review what happened today in this session. Summarize key conversations, decisions made, and tasks completed. If nothing notable, say 'Quiet day — no major activity.'

## Tomorrow Preview
Run: gog calendar list --account=theandykaufman@gmail.com --all --date=tomorrow --max=20
List tomorrow's events with times in PT. Flag any early meetings or prep-needed items.

## Open Items
Check memory for any unresolved tasks, pending follow-ups, or items that need attention. List top 3 if any exist.

Format concisely. Send to D0AARQR0Y4V."
```
  </action>
  <verify>
Run on EC2:
- `openclaw cron list` shows evening-recap job
- `cat ~/.openclaw/cron/jobs.json | python3 -c "import sys,json; jobs=json.load(sys.stdin)['jobs']; er=[j for j in jobs if j.get('name')=='evening-recap']; print(len(er)==1 and 'America/Los_Angeles' in str(er[0].get('schedule',{})))"` returns True
  </verify>
  <done>Evening recap cron created: fires at 7 PM PT daily, reviews day's activity, previews tomorrow's calendar, lists open items. Delivers to Andy's DM. Uses Sonnet model.</done>
</task>

<task type="auto">
  <name>Task 2: Create weekly review cron job</name>
  <files>/home/ubuntu/.openclaw/cron/jobs.json</files>
  <action>
SSH to 100.72.143.9 and create the weekly review cron (BR-08):

```
/home/ubuntu/.npm-global/bin/openclaw cron add \
  --name "weekly-review" \
  --description "Weekly review every Sunday at 8 AM PT" \
  --cron "0 8 * * 0" \
  --tz "America/Los_Angeles" \
  --model sonnet \
  --session main \
  --wake now \
  --timeout-seconds 120 \
  --system-event "Weekly Review — compile and send to Andy's DM D0AARQR0Y4V.

## Health Trends (7-day)
Query /workspace/health.db: SELECT snapshot_date, sleep_score, readiness_score, hrv_average, resting_heart_rate, activity_score FROM health_snapshots WHERE snapshot_date >= date('now', '-7 days') ORDER BY snapshot_date ASC.
Report: average scores for the week, best/worst days, any concerning trends (e.g., declining HRV, rising resting HR). Compare to prior week if data exists.

## Week in Review
Summarize the past week's key events, conversations, and accomplishments from session history and memory. Group by theme (work, personal, health).

## Upcoming Week
Run: gog calendar list --account=theandykaufman@gmail.com --all --days=7 --max=50
List key events for the coming week. Flag busy days, important meetings, or scheduling conflicts.

## Recommendations
Based on health trends and schedule, suggest 1-2 actionable items (e.g., 'HRV trending down — consider lighter exercise Tuesday', 'Heavy meeting day Wednesday — block focus time').

Format as a structured weekly report. Send to D0AARQR0Y4V."
```
  </action>
  <verify>
Run on EC2:
- `openclaw cron list` shows weekly-review job
- `cat ~/.openclaw/cron/jobs.json | python3 -c "import sys,json; jobs=json.load(sys.stdin)['jobs']; wr=[j for j in jobs if j.get('name')=='weekly-review']; print(len(wr)==1 and '0 8 * * 0' in str(wr[0].get('schedule',{}).get('expr','')))"` returns True
  </verify>
  <done>Weekly review cron created: fires Sunday 8 AM PT, covers 7-day health trends from health.db, week summary, upcoming calendar, and actionable recommendations. Delivers to Andy's DM. Uses Sonnet model.</done>
</task>

</tasks>

<verification>
1. evening-recap cron exists with schedule "0 19 * * *" tz America/Los_Angeles
2. weekly-review cron exists with schedule "0 8 * * 0" tz America/Los_Angeles
3. Both target Andy's Slack DM D0AARQR0Y4V
4. Both use Sonnet model
5. weekly-review references health_snapshots query
6. evening-recap references tomorrow's calendar
</verification>

<success_criteria>
- BR-07: Evening recap fires at 7 PM PT (19:00 America/Los_Angeles) daily
- BR-08: Weekly review fires Sunday 8 AM PT (08:00 America/Los_Angeles) weekly
</success_criteria>

<output>
After completion, create `.planning/phases/03-daily-briefing-rate-limits/03-03-SUMMARY.md`
</output>
