---
phase: 08-multi-agent-automation
plan: 02
type: execute
wave: 2
depends_on: ["08-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All 4 agents complete at least one heartbeat cycle within 15 minutes"
    - "Daily standup posts to #ops with agent activity summaries"
  artifacts: []
  key_links:
    - from: "heartbeat crons"
      to: "coordination.db agent_activity"
      via: "agent heartbeat execution writes to DB"
      pattern: "agent_activity"
    - from: "daily-standup cron"
      to: "#ops Slack channel"
      via: "Sentinel posts formatted standup"
      pattern: "ops.*standup"
---

<objective>
Verify full heartbeat cycle and standup posting to #ops.

Purpose: AA-03 requires proof that all 4 agents complete a heartbeat within 15 minutes. AA-04 requires the standup to actually post to #ops with all agent summaries. This plan waits for real execution and verifies results.

Output: Evidence of heartbeat cycle completion + standup post in #ops.
</objective>

<execution_context>
@/Users/andykaufman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/andykaufman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Plan 01 summary â€” heartbeat verification + standup cron creation
@.planning/phases/08-multi-agent-automation/08-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify full heartbeat cycle completes for all 4 agents</name>
  <files></files>
  <action>
SSH to EC2 and check that all 4 agents have recent heartbeat activity. Since heartbeats run every 15 minutes with staggered offsets, we need to verify recent execution.

**Step 1: Check cron job last run status**
```bash
ssh -i ~/.ssh/clawdbot-key.pem ubuntu@100.72.143.9 '/home/ubuntu/.npm-global/bin/openclaw cron list --json'
```

Verify all 4 agent heartbeats show `lastStatus: "ok"` and `lastRun` within the last 15 minutes. If lastRun is older than 15 minutes, wait for the next cycle.

**Step 2: Check coordination.db for recent activity**
```bash
ssh -i ~/.ssh/clawdbot-key.pem ubuntu@100.72.143.9 "sqlite3 ~/clawd/coordination.db \"SELECT agent_id, activity_type, COUNT(*) as cnt, MAX(created_at) as latest FROM agent_activity WHERE created_at > datetime('now', '-1 hour') GROUP BY agent_id, activity_type ORDER BY agent_id\""
```

Expected: All 4 agent IDs (main, landos, rangeos, ops) show heartbeat activity.

**Known gap:** Main agent (Bob) may not write to coordination.db per Phase 6 finding (behavioral, not infra). If main is missing from coordination.db but shows lastStatus "ok" in cron list, document this as known and acceptable for AA-03 (the requirement is "heartbeat cycle completes", not "writes to coordination.db").

**Step 3: If any agent shows lastStatus other than "ok"**, check gateway logs:
```bash
ssh -i ~/.ssh/clawdbot-key.pem ubuntu@100.72.143.9 'journalctl --user -u openclaw-gateway.service --since "15 min ago" --no-pager | tail -50'
```

Document evidence: lastRun timestamps for all 4 heartbeats, coordination.db activity counts.
  </action>
  <verify>
1. All 4 heartbeat crons show lastStatus="ok" with lastRun within last 15 min
2. At least 3 agents (landos, rangeos, ops) show activity in coordination.db within last hour
3. If main is missing from coordination.db, document as known behavioral gap
  </verify>
  <done>All 4 agents completed at least one heartbeat cycle, evidenced by cron lastStatus="ok" and coordination.db activity records</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify standup posted to #ops channel</name>
  <what-built>
Daily standup cron (08-01 Task 2) configured at 13:00 UTC targeting Sentinel.

To verify without waiting for 8 AM EST, we can trigger a manual standup run.
  </what-built>
  <how-to-verify>
**Option A: Trigger manual standup (recommended if not 8 AM EST)**

Run the standup cron manually:
```bash
ssh -i ~/.ssh/clawdbot-key.pem ubuntu@100.72.143.9 '/home/ubuntu/.npm-global/bin/openclaw cron trigger daily-standup'
```

Wait 60-90 seconds for Sentinel to execute, then check:
1. Open Slack and navigate to #ops channel
2. Look for a standup message from Sentinel/Bob containing:
   - Agent Activity section (heartbeat counts)
   - Task Status section
   - Inter-Agent Messages section
   - Health Check section
3. Verify all agent IDs are mentioned (main, landos, rangeos, ops)

**Option B: Wait for natural execution at 13:00 UTC / 8 AM EST**

Check #ops channel after 8 AM EST for the standup post.

**What to look for:**
- Message from Sentinel in #ops
- Formatted with sections (Activity, Tasks, Messages, Health)
- References all 4 agents
- Shows real data from coordination.db (not placeholder text)

Type "approved" if standup posted correctly, or describe issues.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues with the standup post</resume-signal>
</task>

</tasks>

<verification>
1. All 4 heartbeat crons: lastStatus="ok", lastRun within 15 min
2. Coordination DB shows multi-agent activity within last hour
3. Standup message visible in #ops Slack channel with all agent summaries
4. Standup message formatted with Activity, Tasks, Messages, Health sections
</verification>

<success_criteria>
- AA-03 satisfied: Full heartbeat cycle verified (all 4 agents)
- AA-04 satisfied: Standup posted to #ops with all agent summaries
- All 4 AA requirements (AA-01 through AA-04) complete
</success_criteria>

<output>
After completion, create `.planning/phases/08-multi-agent-automation/08-02-SUMMARY.md`
</output>
