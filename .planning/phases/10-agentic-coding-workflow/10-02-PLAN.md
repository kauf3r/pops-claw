---
phase: 10-agentic-coding-workflow
plan: 02
type: execute
wave: 2
depends_on: ["10-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Bob responds to 'review PR #N' in Slack with a structured code review"
    - "Morning briefing includes open PR count when run"
  artifacts: []
  key_links:
    - from: "Slack message 'review PR #N'"
      to: "coding-assistant SKILL.md"
      via: "Bob reads skill and executes gh pr view + gh pr diff workflow"
    - from: "morning-briefing cron"
      to: "gh pr list output"
      via: "systemEvent instructs agent to run gh pr list and format results"
---

<objective>
Verify the coding-assistant skill works end-to-end via Slack and confirm the morning briefing GitHub section.

Purpose: Prove CW-04 (review PR command) and CW-03 (briefing PR count) work in practice.
Output: Verification evidence confirming all CW requirements satisfied.
</objective>

<execution_context>
@/Users/andykaufman/.claude/get-shit-done/workflows/execute-plan.md
@/Users/andykaufman/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-agentic-coding-workflow/10-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restart gateway and trigger verification tests</name>
  <files></files>
  <action>
SSH to EC2 (100.72.143.9) and restart the gateway so Bob picks up the new coding-assistant skill:

```bash
systemctl --user restart openclaw-gateway.service
sleep 5
systemctl --user status openclaw-gateway.service
```

Verify the skill is detected:
```bash
/home/ubuntu/.npm-global/bin/openclaw skills list 2>/dev/null || echo "No skills list command; verify via gateway logs"
```

Check gateway logs for skill loading:
```bash
journalctl --user -u openclaw-gateway.service --since "5 minutes ago" --no-pager | grep -i skill
```

Then trigger a manual morning briefing run to verify the GitHub section:
```bash
# Find morning-briefing cron ID
CRON_ID=$(/home/ubuntu/.npm-global/bin/openclaw cron list --json 2>/dev/null | python3 -c "import sys,json; jobs=json.load(sys.stdin); [print(j['id']) for j in jobs if 'morning' in j.get('name','').lower()]" 2>/dev/null)

# If cron list --json works, trigger it
/home/ubuntu/.npm-global/bin/openclaw cron run "$CRON_ID" --timeout 120000
```

If the cron trigger method doesn't work cleanly, note it for the checkpoint -- the human can verify the briefing at next 7 AM run or by manually asking Bob in Slack.

Capture evidence:
- Gateway status (active/running)
- Skill detection in logs
- Cron trigger result (if available)
  </action>
  <verify>
1. `systemctl --user status openclaw-gateway.service` shows active (running)
2. Gateway logs show skill loading or no errors
3. Cron trigger succeeds or documented for manual check
  </verify>
  <done>Gateway restarted with new skill, morning briefing triggered for verification</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify PR review command and briefing GitHub section via Slack</name>
  <files></files>
  <action>
Present verification results from Task 1 to user. Two capabilities were built and need verification:
1. **coding-assistant skill** (CW-01/02/04): SKILL.md enabling PR review, issue management, and code assistance via gh CLI
2. **Morning briefing GitHub section** (CW-03): Updated systemEvent with open PR count

Ask user to verify via Slack:

**Test 1 - PR review command:** Open Slack DM with Bob and send: "review PR #1 on andykaufman/pops-claw" (or any repo with an open PR). Bob should respond with PR title/summary, files changed, diff analysis, and assessment.

**Test 2 - If no open PRs:** Send "list open PRs" to Bob. He should run `gh pr list` and report. Also try: "create an issue on andykaufman/pops-claw titled 'Test issue from Bob' with body 'Testing coding assistant skill'" to verify issue management.

**Test 3 - Briefing section:** Check if the morning briefing (from Task 1 cron trigger or next 7 AM run) includes GitHub Activity section. Or ask Bob: "Run the GitHub Activity section of my morning briefing -- list all open PRs across my repos."

**Note:** If Bob doesn't pick up the skill immediately, try messaging in a fresh Slack channel or wait for a new session.
  </action>
  <verify>User confirms PR review and briefing GitHub section work correctly by typing "approved"</verify>
  <done>All 4 CW requirements human-verified: CW-01 (skill created), CW-02 (tools combined), CW-03 (briefing PR count), CW-04 (review PR command)</done>
</task>

</tasks>

<verification>
1. Gateway running with coding-assistant skill loaded
2. Bob responds to "review PR #N" with structured code review
3. Morning briefing includes GitHub Activity section
4. All 4 CW requirements verified (CW-01 through CW-04)
</verification>

<success_criteria>
- CW-01: coding-assistant SKILL.md operational (Bob uses it)
- CW-02: GitHub CLI + filesystem combined for code review
- CW-03: Open PR count appears in morning briefing
- CW-04: "review PR #N" triggers diff review via Slack
</success_criteria>

<output>
After completion, create `.planning/phases/10-agentic-coding-workflow/10-02-SUMMARY.md`
</output>
